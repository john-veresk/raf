# Task: Implement Dependency Checking in `raf do`

## Objective
Update the `raf do` command to detect blocked tasks and automatically create blocked outcome files instead of attempting execution.

## Context
When executing a project, if a task fails, any tasks that depend on it should be automatically marked as blocked. This prevents wasting time attempting tasks that cannot succeed because their prerequisites failed.

## Dependencies
003

## Requirements
- Before executing a task, check if it's blocked (has failed/blocked dependencies)
- For blocked tasks, skip Claude execution entirely
- Generate a blocked outcome file with:
  - Explanation of which dependency failed
  - List of failed/blocked dependency task IDs
  - End with `<promise>BLOCKED</promise>` marker
- Show clear console output when a task is blocked
- Update progress display to show blocked tasks distinctly
- Blocked tasks should be processed in order (to cascade blocking properly)

## Implementation Steps
1. Update `src/commands/do.ts` task execution loop:
   - Before calling Claude, check task status from derived state
   - If status is `blocked`, skip execution and generate blocked outcome
2. Create blocked outcome generator (can be in `do.ts` or separate module):
   - Generate structured outcome explaining the block
   - Include failed dependency info
   - End with BLOCKED marker
3. Update console output for blocked tasks:
   - Show message like "Task 003 blocked by failed dependency: 002"
   - Use distinct color/formatting (e.g., yellow for blocked vs red for failed)
4. Ensure proper cascade: after marking a task blocked, re-derive state before next task
5. Update summary output to show blocked count separately from failed

## Acceptance Criteria
- [ ] Blocked tasks are detected and skipped
- [ ] Blocked outcome file created with proper format and BLOCKED marker
- [ ] Console shows clear blocked message with dependency info
- [ ] Blocking cascades properly (if 001 fails, 002 blocked, 003 depends on 002 also blocked)
- [ ] Summary shows blocked tasks separately from failed
- [ ] No Claude execution attempted for blocked tasks

## Notes
- Blocked outcome files are generated by RAF, not Claude (unlike normal outcomes)
- The BLOCKED marker ensures consistency with the outcome file convention
- Re-deriving state after each task ensures cascading works correctly
